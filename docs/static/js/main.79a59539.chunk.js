(this.webpackJsonpentish=this.webpackJsonpentish||[]).push([[0],{35:function(e,n,r){var t=r(24),a=r(77);"string"===typeof(a=a.__esModule?a.default:a)&&(a=[[e.i,a,""]]);var i={insert:"head",singleton:!1};t(a,i);e.exports=a.locals||{}},36:function(e,n,r){var t=r(24),a=r(78);"string"===typeof(a=a.__esModule?a.default:a)&&(a=[[e.i,a,""]]);var i={insert:"head",singleton:!1};t(a,i);e.exports=a.locals||{}},41:function(e,n,r){var t=r(24),a=r(42);"string"===typeof(a=a.__esModule?a.default:a)&&(a=[[e.i,a,""]]);var i={insert:"head",singleton:!1};t(a,i);e.exports=a.locals||{}},42:function(e,n,r){"use strict";r.r(n);var t=r(11),a=r.n(t),i=r(12),c=r.n(i)()(a.a);c.push([e.i,"body {\r\n  margin: 0;\r\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',\r\n    'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',\r\n    sans-serif;\r\n  -webkit-font-smoothing: antialiased;\r\n  -moz-osx-font-smoothing: grayscale;\r\n}\r\n\r\ncode {\r\n  font-family: source-code-pro, Menlo, Monaco, Consolas, 'Courier New',\r\n    monospace;\r\n}\r\n","",{version:3,sources:["webpack://./src/index.css"],names:[],mappings:"AAAA;EACE,SAAS;EACT;;cAEY;EACZ,mCAAmC;EACnC,kCAAkC;AACpC;;AAEA;EACE;aACW;AACb",sourcesContent:["body {\r\n  margin: 0;\r\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',\r\n    'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',\r\n    sans-serif;\r\n  -webkit-font-smoothing: antialiased;\r\n  -moz-osx-font-smoothing: grayscale;\r\n}\r\n\r\ncode {\r\n  font-family: source-code-pro, Menlo, Monaco, Consolas, 'Courier New',\r\n    monospace;\r\n}\r\n"],sourceRoot:""}]),n.default=c},71:function(e,n){},77:function(e,n,r){"use strict";r.r(n);var t=r(11),a=r.n(t),i=r(12),c=r.n(i)()(a.a);c.push([e.i,"._27KvXhK1Cn3xeSy_ERUuYO { /*!*/ }\n.iCwJ4OetHHYzpK6q4N79Q {\n\ndisplay: flex;\nflex-direction: column;\nheight: 100vh;\nwidth: 100vw;\n}\n.iCwJ4OetHHYzpK6q4N79Q select {\npadding: 5px;\nfont-size: 0.875rem;\nborder: 0.0625rem solid #375EAB;\nheight: 30px;\n}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9BcHAtQ29udGFpbmVyLm1vZHVsZS5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsUUFBUSxJQUFJLEVBQUU7QUFDZDtBQUNBLGNBQWM7O0FBRWQsYUFBYTtBQUNiLHNCQUFzQjtBQUN0QixhQUFhO0FBQ2IsWUFBWTtBQVFaO0FBTkE7QUFDQSxZQUFZO0FBQ1osbUJBQW1CO0FBQ25CLCtCQUErQjtBQUMvQixZQUFZO0FBQ1oiLCJmaWxlIjoic3JjXFxBcHAtQ29udGFpbmVyLm1vZHVsZS5jc3MiLCJzb3VyY2VzQ29udGVudCI6WyIuY2xzMSB7IC8qISovIH1cbi5jbHMyIHtcbmNvbXBvc2VzOiBjbHMxO1xuXG5kaXNwbGF5OiBmbGV4O1xuZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbmhlaWdodDogMTAwdmg7XG53aWR0aDogMTAwdnc7XG5cbnNlbGVjdCB7XG5wYWRkaW5nOiA1cHg7XG5mb250LXNpemU6IDAuODc1cmVtO1xuYm9yZGVyOiAwLjA2MjVyZW0gc29saWQgIzM3NUVBQjtcbmhlaWdodDogMzBweDtcbn1cbn0iXX0= */","",{version:3,sources:["webpack://./src/src/App-Container.module.css","webpack://./src/App-Container.module.css"],names:[],mappings:"AAAA,2BAAQ,IAAI,EAAE;AACd;;AAGA,aAAa;AACb,sBAAsB;AACtB,aAAa;AACb,YAAY;AAQZ;AANA;AACA,YAAY;AACZ,mBAAmB;AACnB,+BAA+B;AAC/B,YAAY;AACZ;ACCA,gtBAAgtB",sourcesContent:[".cls1 { /*!*/ }\n.cls2 {\ncomposes: cls1;\n\ndisplay: flex;\nflex-direction: column;\nheight: 100vh;\nwidth: 100vw;\n\nselect {\npadding: 5px;\nfont-size: 0.875rem;\nborder: 0.0625rem solid #375EAB;\nheight: 30px;\n}\n}",".cls1 { /*!*/ }\n.cls2 {\ncomposes: cls1;\n\ndisplay: flex;\nflex-direction: column;\nheight: 100vh;\nwidth: 100vw;\n}\n.cls2 select {\npadding: 5px;\nfont-size: 0.875rem;\nborder: 0.0625rem solid #375EAB;\nheight: 30px;\n}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9BcHAtQ29udGFpbmVyLm1vZHVsZS5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsUUFBUSxJQUFJLEVBQUU7QUFDZDtBQUNBLGNBQWM7O0FBRWQsYUFBYTtBQUNiLHNCQUFzQjtBQUN0QixhQUFhO0FBQ2IsWUFBWTtBQVFaO0FBTkE7QUFDQSxZQUFZO0FBQ1osbUJBQW1CO0FBQ25CLCtCQUErQjtBQUMvQixZQUFZO0FBQ1oiLCJmaWxlIjoic3JjXFxBcHAtQ29udGFpbmVyLm1vZHVsZS5jc3MiLCJzb3VyY2VzQ29udGVudCI6WyIuY2xzMSB7IC8qISovIH1cbi5jbHMyIHtcbmNvbXBvc2VzOiBjbHMxO1xuXG5kaXNwbGF5OiBmbGV4O1xuZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbmhlaWdodDogMTAwdmg7XG53aWR0aDogMTAwdnc7XG5cbnNlbGVjdCB7XG5wYWRkaW5nOiA1cHg7XG5mb250LXNpemU6IDAuODc1cmVtO1xuYm9yZGVyOiAwLjA2MjVyZW0gc29saWQgIzM3NUVBQjtcbmhlaWdodDogMzBweDtcbn1cbn0iXX0= */"],sourceRoot:""}]),c.locals={cls1:"_27KvXhK1Cn3xeSy_ERUuYO",cls2:"iCwJ4OetHHYzpK6q4N79Q _27KvXhK1Cn3xeSy_ERUuYO"},n.default=c},78:function(e,n,r){"use strict";r.r(n);var t=r(11),a=r.n(t),i=r(12),c=r.n(i)()(a.a);c.push([e.i,".WlLYDOQAi_2gHMRjpYz2k { /*!*/ }\n._2GZvzmSPqaENq77rUojI56 {\n\ndisplay: flex;\nflex-direction: row;\nalign-items: center;\npadding: 10px 16px 10px 16px;\nbackground-color: #E0EBF5;\n}\n._2GZvzmSPqaENq77rUojI56 h1 {\nmargin-right: 16px;\nfont-size: 20px;\nfont-family: sans-serif;\n}\n._2GZvzmSPqaENq77rUojI56 * {\nmargin-top: 10px;\nmargin-bottom: 10px;\nmargin-right: 12px;\nborder-radius: 5px;\nbox-sizing: border-box;\n}\n._2GZvzmSPqaENq77rUojI56 button {\nborder: 1px solid #375EAB;\nfont-size: 16px;\nfont-family: sans-serif;\nbackground: #375EAB;\ncolor: white;\nheight: 30px;\n}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9BcHAtTmF2YmFyLm1vZHVsZS5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsUUFBUSxJQUFJLEVBQUU7QUFDZDtBQUNBLGNBQWM7O0FBRWQsYUFBYTtBQUNiLG1CQUFtQjtBQUNuQixtQkFBbUI7QUFDbkIsNEJBQTRCO0FBQzVCLHlCQUF5QjtBQXdCekI7QUF0QkE7QUFDQSxrQkFBa0I7QUFDbEIsZUFBZTtBQUNmLHVCQUF1QjtBQUN2QjtBQUVBO0FBQ0EsZ0JBQWdCO0FBQ2hCLG1CQUFtQjtBQUNuQixrQkFBa0I7QUFDbEIsa0JBQWtCO0FBQ2xCLHNCQUFzQjtBQUN0QjtBQUVBO0FBQ0EseUJBQXlCO0FBQ3pCLGVBQWU7QUFDZix1QkFBdUI7QUFDdkIsbUJBQW1CO0FBQ25CLFlBQVk7QUFDWixZQUFZO0FBQ1oiLCJmaWxlIjoic3JjXFxBcHAtTmF2YmFyLm1vZHVsZS5jc3MiLCJzb3VyY2VzQ29udGVudCI6WyIuY2xzMSB7IC8qISovIH1cbi5jbHMyIHtcbmNvbXBvc2VzOiBjbHMxO1xuXG5kaXNwbGF5OiBmbGV4O1xuZmxleC1kaXJlY3Rpb246IHJvdztcbmFsaWduLWl0ZW1zOiBjZW50ZXI7XG5wYWRkaW5nOiAxMHB4IDE2cHggMTBweCAxNnB4O1xuYmFja2dyb3VuZC1jb2xvcjogI0UwRUJGNTtcblxuaDEge1xubWFyZ2luLXJpZ2h0OiAxNnB4O1xuZm9udC1zaXplOiAyMHB4O1xuZm9udC1mYW1pbHk6IHNhbnMtc2VyaWY7XG59XG5cbioge1xubWFyZ2luLXRvcDogMTBweDtcbm1hcmdpbi1ib3R0b206IDEwcHg7XG5tYXJnaW4tcmlnaHQ6IDEycHg7XG5ib3JkZXItcmFkaXVzOiA1cHg7XG5ib3gtc2l6aW5nOiBib3JkZXItYm94O1xufVxuXG5idXR0b24ge1xuYm9yZGVyOiAxcHggc29saWQgIzM3NUVBQjtcbmZvbnQtc2l6ZTogMTZweDtcbmZvbnQtZmFtaWx5OiBzYW5zLXNlcmlmO1xuYmFja2dyb3VuZDogIzM3NUVBQjtcbmNvbG9yOiB3aGl0ZTtcbmhlaWdodDogMzBweDtcbn1cbn0iXX0= */","",{version:3,sources:["webpack://./src/src/App-Navbar.module.css","webpack://./src/App-Navbar.module.css"],names:[],mappings:"AAAA,yBAAQ,IAAI,EAAE;AACd;;AAGA,aAAa;AACb,mBAAmB;AACnB,mBAAmB;AACnB,4BAA4B;AAC5B,yBAAyB;AAwBzB;AAtBA;AACA,kBAAkB;AAClB,eAAe;AACf,uBAAuB;AACvB;AAEA;AACA,gBAAgB;AAChB,mBAAmB;AACnB,kBAAkB;AAClB,kBAAkB;AAClB,sBAAsB;AACtB;AAEA;AACA,yBAAyB;AACzB,eAAe;AACf,uBAAuB;AACvB,mBAAmB;AACnB,YAAY;AACZ,YAAY;AACZ;ACDA,wxCAAwxC",sourcesContent:[".cls1 { /*!*/ }\n.cls2 {\ncomposes: cls1;\n\ndisplay: flex;\nflex-direction: row;\nalign-items: center;\npadding: 10px 16px 10px 16px;\nbackground-color: #E0EBF5;\n\nh1 {\nmargin-right: 16px;\nfont-size: 20px;\nfont-family: sans-serif;\n}\n\n* {\nmargin-top: 10px;\nmargin-bottom: 10px;\nmargin-right: 12px;\nborder-radius: 5px;\nbox-sizing: border-box;\n}\n\nbutton {\nborder: 1px solid #375EAB;\nfont-size: 16px;\nfont-family: sans-serif;\nbackground: #375EAB;\ncolor: white;\nheight: 30px;\n}\n}",".cls1 { /*!*/ }\n.cls2 {\ncomposes: cls1;\n\ndisplay: flex;\nflex-direction: row;\nalign-items: center;\npadding: 10px 16px 10px 16px;\nbackground-color: #E0EBF5;\n}\n.cls2 h1 {\nmargin-right: 16px;\nfont-size: 20px;\nfont-family: sans-serif;\n}\n.cls2 * {\nmargin-top: 10px;\nmargin-bottom: 10px;\nmargin-right: 12px;\nborder-radius: 5px;\nbox-sizing: border-box;\n}\n.cls2 button {\nborder: 1px solid #375EAB;\nfont-size: 16px;\nfont-family: sans-serif;\nbackground: #375EAB;\ncolor: white;\nheight: 30px;\n}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9BcHAtTmF2YmFyLm1vZHVsZS5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsUUFBUSxJQUFJLEVBQUU7QUFDZDtBQUNBLGNBQWM7O0FBRWQsYUFBYTtBQUNiLG1CQUFtQjtBQUNuQixtQkFBbUI7QUFDbkIsNEJBQTRCO0FBQzVCLHlCQUF5QjtBQXdCekI7QUF0QkE7QUFDQSxrQkFBa0I7QUFDbEIsZUFBZTtBQUNmLHVCQUF1QjtBQUN2QjtBQUVBO0FBQ0EsZ0JBQWdCO0FBQ2hCLG1CQUFtQjtBQUNuQixrQkFBa0I7QUFDbEIsa0JBQWtCO0FBQ2xCLHNCQUFzQjtBQUN0QjtBQUVBO0FBQ0EseUJBQXlCO0FBQ3pCLGVBQWU7QUFDZix1QkFBdUI7QUFDdkIsbUJBQW1CO0FBQ25CLFlBQVk7QUFDWixZQUFZO0FBQ1oiLCJmaWxlIjoic3JjXFxBcHAtTmF2YmFyLm1vZHVsZS5jc3MiLCJzb3VyY2VzQ29udGVudCI6WyIuY2xzMSB7IC8qISovIH1cbi5jbHMyIHtcbmNvbXBvc2VzOiBjbHMxO1xuXG5kaXNwbGF5OiBmbGV4O1xuZmxleC1kaXJlY3Rpb246IHJvdztcbmFsaWduLWl0ZW1zOiBjZW50ZXI7XG5wYWRkaW5nOiAxMHB4IDE2cHggMTBweCAxNnB4O1xuYmFja2dyb3VuZC1jb2xvcjogI0UwRUJGNTtcblxuaDEge1xubWFyZ2luLXJpZ2h0OiAxNnB4O1xuZm9udC1zaXplOiAyMHB4O1xuZm9udC1mYW1pbHk6IHNhbnMtc2VyaWY7XG59XG5cbioge1xubWFyZ2luLXRvcDogMTBweDtcbm1hcmdpbi1ib3R0b206IDEwcHg7XG5tYXJnaW4tcmlnaHQ6IDEycHg7XG5ib3JkZXItcmFkaXVzOiA1cHg7XG5ib3gtc2l6aW5nOiBib3JkZXItYm94O1xufVxuXG5idXR0b24ge1xuYm9yZGVyOiAxcHggc29saWQgIzM3NUVBQjtcbmZvbnQtc2l6ZTogMTZweDtcbmZvbnQtZmFtaWx5OiBzYW5zLXNlcmlmO1xuYmFja2dyb3VuZDogIzM3NUVBQjtcbmNvbG9yOiB3aGl0ZTtcbmhlaWdodDogMzBweDtcbn1cbn0iXX0= */"],sourceRoot:""}]),c.locals={cls1:"WlLYDOQAi_2gHMRjpYz2k",cls2:"_2GZvzmSPqaENq77rUojI56 WlLYDOQAi_2gHMRjpYz2k"},n.default=c},80:function(e,n,r){"use strict";r.r(n);var t,a=r(1),i=r.n(a),c=r(30),o=r.n(c),s=(r(41),r(3)),u=r(26),l=r.n(u),p=r(18),m=r(27),f=r(31),b=r(16),h=r(20),d=r(21),g=r(22),y=r(32),v=r.n(y),A='{\r\n  function joinClauses(type, first, rest) {\r\n    if (first.type === \'fact\' && rest.length === 1 && (rest[0].type === \'conjunction\' || rest[0].type === \'disjunction\')) {\r\n      rest[0].clauses.unshift(first);\r\n      return rest[0];\r\n    }\r\n    return {\r\n      type: type,\r\n      clauses: [first].concat(rest),\r\n    };\r\n  }\r\n  function comparisonTree(left, rest) {\r\n    const right = rest.shift();\r\n    const node = { type: \'comparison\', left, operator: right.operator, right: right.expr };\r\n    if (rest.length === 0) {\r\n      return node;\r\n    }\r\n    return comparisonTree(node, rest);\r\n  }\r\n  function flatten(arr) {\r\n    return arr.reduce((acc, cur) => acc.concat(Array.isArray(cur) ? flatten(cur) : cur), []);\r\n  };\r\n  function parseNumber(n) {\r\n    return parseFloat(flatten(n).filter(d => d).join(\'\'));\r\n  }\r\n}\r\n\r\nstatements\r\n  = statement+\r\n\r\nstatement\r\n  = comment:comment "\\n"? { return comment }\r\n  / inference:inference "." { return inference }\r\n  / claim:claim "." { return claim }\r\n  / fact:fact "." { return fact }\r\n  / roll:rolling "." { return roll}\r\n  / "?" query:clause "." { return { type: \'query\', clause: query } }\r\n  / [ \\t\\r\\n]+ { return null }\r\n\r\nfact\r\n  = whitespace name:variable "(" args:arguments ")" whitespace { return { type: \'fact\', table: name.value, fields: args.arguments } }\r\n  / whitespace "~" fact:fact { return { ...fact, negative: true } }\r\n\r\nexpr\r\n  = addition\r\n  / multiplication \r\n  / probability\r\n  / function\r\n  / "(" comparison ")"\r\n  / variable\r\n  / roll\r\n  / string \r\n  / number\r\n\r\nterm\r\n  = multiplication\r\n  / factor\r\n\r\nfactor\r\n  = parenthetical_expr\r\n  / function\r\n  / variable\r\n  / number \r\n\r\naddition\r\n  = left:term whitespace operator:([+\\-]) whitespace right:expr { return { type: \'binary_operation\', operator, left, right } }\r\n\r\nmultiplication\r\n  = left:factor whitespace operator:([*/]) whitespace right:expr { return { type: \'binary_operation\', operator, left, right } }\r\n\r\nparenthetical_expr\r\n  = "(" " "* expr:expr " "* ")" { return expr }\r\n\r\nfunction\r\n  = name:variable "(" args:arguments ")" { return { type: \'function\', function: name.value, arguments: args.arguments } }\r\n\r\narguments\r\n  = whitespace first:expr rest:nextargs* whitespace { return { type: \'arguments\', arguments: [first].concat(rest) } }\r\n\r\nnextargs\r\n  = "," whitespace expr:expr { return expr }\r\n\r\nprobability\r\n  = "Pr(" whitespace left:expr whitespace operator:comparison_operator whitespace right:expr whitespace ")" { return { type: \'function\', function: \'probability\', arguments: [{ type: \'comparison\', left, operator, right }] } }\r\n  / "Pr(" whitespace arg:expr whitespace ")" { return { type: \'function\', function: \'probability\', arguments: [arg]}}\r\n\r\ninference\r\n  = left:fact ":-" whitespace right:clause { return { type: \'inference\', left, right } }\r\n\r\nclause\r\n  = conjunction\r\n  / disjunction\r\n  / "(" whitespace clause:clause whitespace ")" { return clause }\r\n  / comparison\r\n  / fact\r\n\r\nconjunction\r\n  = "(" first:clause ")" whitespace rest:next_conjunction+ { return joinClauses(\'conjunction\', first, rest) }\r\n  / first:fact rest:next_conjunction+ { return joinClauses(\'conjunction\', first, rest) }\r\n\r\ndisjunction\r\n  = "(" first:fact ")" whitespace rest:next_disjunction+ { return joinClauses(\'disjunction\', first, rest) }\r\n  / first:fact rest:next_disjunction+ { return joinClauses(\'disjunction\', first, rest) }\r\n\r\nnext_conjunction\r\n  = "&" whitespace clause:clause { return clause }\r\n\r\nnext_disjunction\r\n  = "|" whitespace clause:clause { return clause }\r\n\r\nclaim\r\n  = "\u2234" clause:clause { return { type: \'claim\', clause: clause } }\r\n\r\nrolling\r\n  = "\ud83c\udfb2" clause:clause { return { type: \'rolling\', clause: clause } }\r\n\r\ncomparison\r\n  = whitespace "(" left:expr ")" rest:next_comparison+ { return comparisonTree(left, rest) }\r\n  / whitespace left:expr rest:next_comparison+ { return comparisonTree(left, rest) }\r\n\r\nnext_comparison\r\n  = whitespace operator:comparison_operator whitespace expr:expr { return { operator, expr } }\r\n\r\ncomparison_operator\r\n  = op:"=" { return op }\r\n  / op:"!=" { return op }\r\n  / op:">=" { return op }\r\n  / op:"<=" { return op }\r\n  / op:">" { return op }\r\n  / op:"<" { return op }\r\n\r\ncomment\r\n  = "//" comment:[^\\n]* { return { type: \'comment\', value: comment.join(\'\').trim() } }\r\n  / "/*" comment:(!"*/" .)* "*/" { return { type: \'comment\', value: comment.flat().join(\'\').trim() }}\r\n\r\nstring\r\n  = name:([A-Z][A-Za-z_]+) { return { type: \'string\', value: name[0] + name[1].join(\'\') } }\r\n\r\nvariable\r\n  = name:([a-z_]+) { return { type: \'variable\', value: name.join(\'\') } }\r\n  / "?" { return { type: \'variable\', value: \'?\' } }\r\n\r\nroll\r\n  = count:([0-9]+) "d" die:([0-9]+) modifier:([+-][0-9]+)? { return { type: \'roll\', count: parseInt(count.join(\'\')), die: parseInt(die.join(\'\')), modifier: modifier ? parseInt(modifier.join(\'\')) : 0 } }\r\n\r\nnumber\r\n  = number:([-]?[0-9]+([.][0-9]+)?) { return { type: \'number\', value: parseNumber(number) } }\r\n\r\nwhitespace\r\n  = [ \\t\\r\\n]*\r\n',B=r(33),x=r.n(B),j=r(34),w=r.n(j);t=A;var Q=function(e){Object(h.a)(r,e);var n=Object(d.a)(r);function r(){return Object(b.a)(this,r),n.apply(this,arguments)}return r}(Object(g.a)(Error)),C=function(e){Object(h.a)(r,e);var n=Object(d.a)(r);function r(){return Object(b.a)(this,r),n.apply(this,arguments)}return r}(Object(g.a)(Error)),F=function(e){Object(h.a)(r,e);var n=Object(d.a)(r);function r(){return Object(b.a)(this,r),n.apply(this,arguments)}return r}(Object(g.a)(Error));function O(e,n){var r={};return e.forEach((function(e){var t=n(e);r[t]=r[t]||[],r[t].push(e)})),Object.keys(r).map((function(e){return r[e]}))}function U(e,n){if(e.type!==n.type)return!1;if("roll"===e.type&&"roll"===n.type)return N(e)===N(n);if("value"in e&&"value"in n)return e.value===n.value;throw new Q("incomparable types: ".concat(e.type," and ").concat(n.type))}var k=function(){function e(n){Object(b.a)(this,e),this.parser=void 0,this.tables={},this.inferences=[],this.rng=void 0,this.parser=v.a.generate(t,{trace:!0}),this.rng=x()(n)}return Object(f.a)(e,[{key:"exec",value:function(e){var n;switch(e.type){case"comment":return;case"fact":return this.loadFact(e),void console.log("added ".concat(E(e)));case"inference":return console.log("inferring ".concat(I(e))),void this.loadInference(e);case"claim":if(console.log("testing ".concat(V(e))),!this.testClaim(e))throw new Q("false claim: ".concat(V(e)));return void console.log("verified ".concat(V(e)));case"query":return console.log("query: ".concat(Z(e))),0===(n=this.query(e)).length&&console.warn("no matching facts found"),void n.forEach((function(e){return console.log("found: ".concat(E(e)))}));case"rolling":return console.log("rolling: ".concat("\ud83c\udfb2 ".concat(W(e.clause)))),0===(n=this.roll(e)).length&&console.warn("no rolls found"),void n.forEach((function(e){return console.log("rolled: ".concat(E(e)))}));default:throw new F("unhandled statement type: ".concat(e.type))}}},{key:"load",value:function(e){var n=new w.a(e,{useColor:!1});try{var r=this.parser.parse(e,{tracer:n}).filter((function(e){return e}));for(var t in r){var a=r[t];this.exec(a)}}catch(i){throw"location"in i?(console.error(n.getBacktraceString()),new Error("line ".concat(i.location.start.line," Column ").concat(i.location.start.column,": ").concat(i.message))):(console.error(i),i)}}},{key:"loadFact",value:function(e){var n=this;if(e.negative)this.tables[e.table]=this.tables[e.table].filter((function(n){return!n.every((function(n,r){return U(e.fields[r],n)}))}));else{if(this.tables[e.table]||(this.tables[e.table]=[]),e.fields.some((function(e){return"string"!==e.type&&"number"!==e.type&&"roll"!==e.type})))throw new Q("facts must be grounded with strings or numbers: ".concat(E(e)));this.tables[e.table].some((function(n){return n.every((function(n,r){return U(n,e.fields[r])}))}))||(this.tables[e.table].push(e.fields),this.inferences.forEach((function(e){return n.loadInference(e,!0)})))}}},{key:"query",value:function(e){return this.search(e.clause).map((function(e){return e.facts})).flat()}},{key:"roll",value:function(e){var n=this,r=this.search(e.clause).map((function(e){return e.facts})).flat().map((function(e){return{type:"fact",table:e.table,fields:e.fields.map((function(e){return"roll"===e.type?n.generateRoll(e):e}))}}));return r.forEach((function(e){return n.loadFact(e)})),r}},{key:"loadInference",value:function(e){var n=this,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t=this.search(e.right),a=t.map((function(r){return n.ground(e.left,r)}));a.some((function(e){return e.fields.some((function(e){return"aggregation"===e.type}))}))&&(a=O(a,(function(e){return e.fields.filter((function(e){return"string"===e.type||"number"===e.type})).map((function(e){return e.value})).join("-")})).map((function(e){var r=e[0];return{type:"fact",table:r.table,fields:r.fields.map((function(r,t){return n.aggregate(r,t,e)}))}}))),a.forEach((function(e){return n.loadFact(e)})),r||this.inferences.some((function(n){return I(n)===I(e)}))||this.inferences.push(e)}},{key:"aggregate",value:function(e,n,r){switch(e.type){case"string":case"number":return e;case"aggregation":if("sum"===e.function)return{type:"number",value:r.map((function(e){var r=e.fields[n];if("aggregation"!==r.type)throw new F;return r.arguments})).flat().reduce((function(e,n){if("number"!==n.type)throw new Q("Can't sum type ".concat(n.type));return e+n.value}),0)};throw new Q("Non-existent aggregation function ".concat(e.function));default:throw new F}}},{key:"ground",value:function(e,n){var r=this;return{type:"fact",table:e.table,fields:e.fields.map((function(e){var t=r.evaluateExpression(e,n);switch(typeof t){case"number":return{type:"number",value:t};case"string":return{type:"string",value:t};case"object":return t;default:throw new Q("unknown expression result type ".concat(typeof t))}})),negative:e.negative}}},{key:"search",value:function(e){var n=this;switch(e.type){case"fact":return(this.tables[e.table]||[]).map((function(r){return n.bind(r,e)})).filter((function(e){return void 0!==e}));case"conjunction":var r=[];return this.join(e.clauses.map((function(e){return n.search(e)})),[],r),r.map((function(e){return n.reduceBindings(e)})).filter((function(e){return void 0!==e}));case"disjunction":return e.clauses.map((function(e){return n.search(e)})).flat();case"comparison":return[{facts:[],values:{},comparisons:[e]}]}}},{key:"join",value:function(e,n,r){if(0!==e.length){var t,a=e[0],i=e.slice(1),c=Object(m.a)(a);try{for(c.s();!(t=c.n()).done;){var o=t.value;this.join(i,n.concat([o]),r)}}catch(s){c.e(s)}finally{c.f()}}else r.push(n)}},{key:"reduceBindings",value:function(e){var n=this;try{return e.reduce((function(e,r){Object.keys(e.values).forEach((function(n){if(r.values[n]&&!U(r.values[n],e.values[n]))throw new C("bindings disagree: ".concat(X(r.values[n])," != ").concat(X(e.values[n])))}));var t={facts:e.facts.concat(r.facts),values:Object.assign(e.values,r.values),comparisons:r.comparisons};return r.comparisons.forEach((function(e){if(!n.compare(e,t))throw new C("false comparison: ".concat(W(e),", ").concat(t.values))})),t}),{facts:[],values:{},comparisons:[]})}catch(r){if(r instanceof C)return;throw r}}},{key:"bind",value:function(e,n){try{var r=e.map((function(e,r){var t=n.fields[r];switch(t.type){case"string":case"number":case"roll":if(!U(e,t))throw new C("binding mismatch: ".concat(e," != ").concat(t));return["".concat(n.table,"[").concat(r,"]"),e];case"variable":return"?"===t.value?["".concat(n.table,"[").concat(r,"]"),e]:[t.value,e];default:throw new Q("can't handle ".concat(t.type," ").concat(X(t)," in clause"))}}));return{facts:[{type:"fact",table:n.table,fields:e}],values:Object.fromEntries(r),comparisons:[]}}catch(t){if(t instanceof C)return;throw t}}},{key:"compare",value:function(e,n){var r=this.evaluateExpression(e.left,n),t=this.evaluateExpression(e.right,n);if("aggregation"===r.type||"aggregation"===t.type)return!1;var a="roll"===r.type?this.averageRoll(r):r.value,i="roll"===t.type?this.averageRoll(t):t.value;switch(e.operator){case"=":return a===i;case"!=":return a!==i;case">":return a>i;case">=":return a>=i;case"<":return a<i;case"<=":return a<=i}}},{key:"probability",value:function(e,n,r){for(var t=0,a=0,i=0;i<e.count;i++)for(var c=1;c<=e.die;c++){var o=c+e.modifier;switch(t++,n){case"=":o===r&&a++;break;case"!=":o!==r&&a++;break;case">=":o>=r&&a++;break;case"<=":o<=r&&a++;break;case">":o>r&&a++;break;case"<":o<r&&a++}}return a/t}},{key:"averageRoll",value:function(e){for(var n=0,r=0;r<e.count;r++)n+=Math.floor(.5*e.die)+1+e.modifier;return n}},{key:"generateRoll",value:function(e){for(var n=0,r=0;r<e.count;r++)n+=Math.floor(this.rng()*e.die)+1+e.modifier;return{type:"number",value:n}}},{key:"testClaim",value:function(e){if("fact"===e.clause.type){var n=this.tables[e.clause.table];if(n){var r,t=Object(m.a)(n);try{var a=function(){var n=r.value;return n.length!==e.clause.fields.length?"continue":e.clause.fields.every((function(e,r){return e.type===n[r].type&&JSON.stringify(e)===JSON.stringify(n[r])}))?{v:!e.clause.negative}:void 0};for(t.s();!(r=t.n()).done;){var i=a();if("continue"!==i&&"object"===typeof i)return i.v}}catch(o){t.e(o)}finally{t.f()}}return!!e.clause.negative}if("conjunction"===e.clause.type)return this.search(e.clause).length>0;if("comparison"===e.clause.type){var c=this.evaluateExpression(e.clause,{facts:[],values:{},comparisons:[]});if("boolean"===c.type)return c.value}throw new Q("can't verify claims of type ".concat(e.clause.type))}},{key:"evaluateFunction",value:function(e,n){var r=this;switch(e.function){case"floor":var t=this.evaluateExpression(e.arguments[0],n);if("number"!==t.type)throw new Q("floor requires numeric argument, got ".concat(t.type));return{type:"number",value:Math.floor(t.value)};case"sum":return{type:"aggregation",function:"sum",arguments:e.arguments.map((function(e){return r.evaluateExpression(e,n)}))};case"probability":if("comparison"===e.arguments[0].type){var a=this.evaluateExpression(e.arguments[0].left,n),i=e.arguments[0].operator,c=this.evaluateExpression(e.arguments[0].right,n);if("roll"!==a.type||"number"!==c.type)throw new Q("can't compute probability for ".concat(e.arguments[0]));return{type:"number",value:this.probability(a,i,c.value)}}var o=this.evaluateExpression(e.arguments[0],n);if("roll"!==o.type)throw new Q("first argument to probability function must be a roll");return o;case"count":default:throw new F}}},{key:"evaluateBinaryOperation",value:function(e,n){var r=this.evaluateExpression(e.left,n);if("number"!==r.type)throw new Q("binary operation requires number on left-hand side, got ".concat(r));var t=this.evaluateExpression(e.right,n);if("number"!==t.type)throw new Q("binary operation requires number on right-hand side, got ".concat(t));switch(e.operator){case"+":return r.value+t.value;case"-":return r.value-t.value;case"/":return r.value/t.value;case"*":return r.value*t.value;case"^":return Math.pow(r.value,t.value)}}},{key:"evaluateExpression",value:function(e,n){switch(e.type){case"binary_operation":return{type:"number",value:this.evaluateBinaryOperation(e,n)};case"function":return this.evaluateFunction(e,n);case"variable":return n.values[e.value];case"comparison":return{type:"boolean",value:this.compare(e,n)};case"boolean":case"string":case"number":case"roll":case"aggregation":return e}}}]),e}();function I(e){return"".concat(E(e.left)," :- ").concat(W(e.right),".")}function Z(e){return"".concat(W(e.clause),"?")}function E(e){return"".concat(e.negative?"~":"").concat(e.table,"(").concat(e.fields.map((function(e){return X(e)})).join(", "),")")}function W(e){switch(e.type){case"fact":return E(e);case"conjunction":return"("+e.clauses.map((function(e){return W(e)})).join(" & ")+")";case"disjunction":return"("+e.clauses.map((function(e){return W(e)})).join(" | ")+")";case"comparison":return z(e)}}function X(e){switch(e.type){case"boolean":return e.value.toString();case"string":return e.value;case"number":return e.value.toString();case"roll":return N(e);case"variable":return e.value;case"binary_operation":return"".concat(X(e.left)," ").concat(e.operator," ").concat(X(e.right));case"function":return"".concat(e.function,"(").concat(e.arguments.map((function(e){return X(e)})).join(", "),")");case"comparison":return z(e);case"aggregation":return"".concat(e.function,"(").concat(e.arguments.map((function(e){return"object"===typeof e?X(e):e})).join(", "),")")}}function z(e){return"".concat(X(e.left)," ").concat(e.operator," ").concat(X(e.right))}function N(e){var n=e.modifier>0?"+".concat(e.modifier):e.modifier<0?"-".concat(e.modifier):"";return"".concat(e.count,"d").concat(e.die).concat(n)}function V(e){return"\u2234 ".concat(W(e.clause))}var M=r(35),H=r.n(M),Y=r(36),G=r.n(Y),S=r(2),L=l()("div",null,{displayName:"Container",styles:H.a}),J=l()("div",null,{displayName:"Navbar",styles:G.a});function D(e){var n=e.interpreter,r=Object(a.useState)(void 0),t=Object(s.a)(r,2),i=t[0],c=t[1];return Object(S.jsxs)("div",{style:{margin:"16px 24px"},children:[Object.keys(n.tables).length>0&&Object(S.jsx)("select",{onChange:function(e){c(e.target.value)},children:Object.keys(n.tables).map((function(e){return Object(S.jsx)("option",{value:e,children:e},e)}))}),i&&Object(S.jsx)(R,{name:i,rows:n.tables[i]})]})}function R(e){var n=e.name,r=e.rows;return Object(S.jsx)("table",{children:Object(S.jsx)("tbody",{children:r.map((function(e,r){return Object(S.jsx)("tr",{children:e.map((function(e,t){return Object(S.jsx)("td",{children:X(e)},"".concat(n,"-").concat(r,"-").concat(t))}))},"".concat(n,"-").concat(r))}))})})}var T=function(){!function(){var e=Object(p.b)();e&&(e.languages.register({id:"entish"}),e.languages.setMonarchTokensProvider("entish",{defaultToken:"invalid",keywords:[],brackets:[{open:"(",close:")",token:"delimiter.parenthesis"}],tokenizer:{root:[[/\u2234|:-|\.|^\?/,"keyword"],[/\/\/.*$/,"comment"],[/[A-Z][a-z]*/,"constant"],[/[0-9]+d[0-9]+([+-][0-9]+)?/,"constant"],[/\d+/,"number"],[/[()]/,"@brackets"],[/([a-z_]+)\(/,"identifier"],[/[a-z_]+|\?/,"variable.name"],[/[,]/,"delimiter"],[/~|=|>|<|!=|>=|<=|\*|\/|\+|-|\^|&|\|/,"operators"],[/[ \t\r\n]+/,""]]}}))}();var e={dungeon_world:'// Auric has the Barbarian class\r\nclass(Auric, Barbarian).\r\n\r\n// Auric has a Strength of 16\r\nattribute(Auric, Strength, 16).\r\n\r\n// Auric has a Wisdom of 16\r\nattribute(Auric, Wisdom, 9).\r\n\r\n// A character\'s bonus is half their attribute score minus ten\r\nbonus(character, attr, floor((score-10)/2)) :- attribute(character, attr, score).\r\n\r\n// Therefore, Auric has a Strength bonus of 3\r\n\u2234 bonus(Auric, Strength, 3).\r\n\r\n// Therefore, Auric has a Wisdom bonus of -1\r\n\u2234 bonus(Auric, Wisdom, -1).\r\n\r\n// Full Plate has an armor bonus of 3\r\narmor(FullPlate, 3).\r\n\r\n// Full Plate has a weight of 4\r\nweight(FullPlate, 4).\r\n\r\n// Full Plate has the clumsy tag\r\ntag(FullPlate, Clumsy).\r\n\r\n// A small shield\r\nweight(RoundShield, 1).\r\narmor(RoundShield, 1).\r\n\r\n// And a sword\r\nweight(TwoHandedSword, 2).\r\ndamage(TwoHandedSword, 1d8).\r\ntag(TwoHandedSword, Close).\r\n\r\n// Given gear has a tag and the character is wearing the gear, add the tag to the character\r\ntag(character, tag) :- (wearing(character, gear) | wielding(character, gear)) & tag(gear, tag).\r\n\r\n// Given a character, their armor is the sum of the armor of gear they are wearing/wielding\r\narmor(character, sum(armor)) :- (wearing(character, gear) | wielding(character, gear)) & armor(gear, armor).\r\n\r\n// Given a character, their load is the sum of the weights of gear they are wearing and wielding\r\nload(character, sum(weight)) :- (wearing(character, gear) | wielding(character, gear)) & weight(gear, weight).\r\n\r\n// The max load of a Barbarian is 8 plus their strength bonus\r\nmax_load(character, 8+str) :- class(character, Barbarian) & bonus(character, Strength, str).\r\n\r\n// Give Auric his gear\r\nwearing(Auric, FullPlate).\r\nwielding(Auric, RoundShield).\r\nwielding(Auric, TwoHandedSword).\r\n\r\n// So Auric is Clumsy, but he\'s got 4 armor a load of 7, and a max load of 11\r\n\u2234 tag(Auric, Clumsy).\r\n\u2234 armor(Auric, 4).\r\n\u2234 load(Auric, 7).\r\n\u2234 max_load(Auric, 11).\r\n\r\n? wielding(Auric, ?) | wearing(Auric, ?).\r\n\r\n// The move "Full Plate and Packing Steel" negates the Clumsy tag\r\n~tag(character, Clumsy) :- move(character, FullPlateAndPackingSteel).\r\n\r\n// Auric has the move "Full Plate and Packing Steel"\r\nmove(Auric, FullPlateAndPackingSteel).\r\n\r\n// Auric is not Clumsy\r\n\u2234 ~tag(Auric, Clumsy).\r\n\r\n// Rolls and probability - work in progress\r\nattack(Barbarian, 1d20+2).\r\n\r\n\u2234 attack(Barbarian, roll) & Pr(roll >= 15) = 0.4.\r\n\r\nenemy(Orc).\r\narmor(Orc, 10).\r\n\r\nhit(character, weapon, enemy, roll, armor) :- class(character, class) & attack(class, roll) & wielding(character, weapon) & damage(weapon, ?) & enemy(enemy) & armor(enemy, armor) & roll >= armor.\r\n\r\n\ud83c\udfb2 attack(Barbarian, ?) & enemy(Orc).\r\n\r\n\u2234 hit(Auric, TwoHandedSword, Orc, 14, 10).',clear:""},n=Object(a.useState)(new k("seed")),r=Object(s.a)(n,2),t=r[0],i=r[1],c=Object(a.useState)(e.dungeon_world),o=Object(s.a)(c,2),u=o[0],l=o[1],m=Object(a.useState)(void 0),f=Object(s.a)(m,2),b=f[0],h=f[1],d=Object(a.useState)([]),g=Object(s.a)(d,2),y=g[0],v=g[1],A=Object(a.useRef)(null);return Object(S.jsxs)(L,{children:[Object(S.jsxs)(J,{children:[Object(S.jsx)("h1",{children:"Entish Playground"}),Object(S.jsx)("button",{onClick:function(){var e=console.log,n=[];console.log=function(e){n.push(e)};try{t.load(u),h(void 0)}catch(r){h(r.message)}console.log=e,v(n),i(t)},children:"Run"}),Object(S.jsxs)("select",{onChange:function(n){var r,t=e[n.target.value];l(t),null===(r=A.current)||void 0===r||r.getModel().setValue(t),i(new k("seed"))},defaultValue:"dungeon_world",children:[Object(S.jsx)("option",{value:"clear",children:"Clear"}),Object(S.jsx)("option",{value:"dungeon_world",children:"Dungeon World"})]}),Object(S.jsx)("a",{href:"//github.com/etherealmachine/entish#readme",children:"README"}),Object(S.jsx)("div",{style:{marginLeft:"auto"},children:Object(S.jsxs)("span",{children:[Object(S.jsx)("a",{href:"//github.com/etherealmachine",children:"James Pettit"})," \xa92021"]})})]}),Object(S.jsxs)("div",{style:{height:"calc(100vh - 70px)"},children:[Object(S.jsx)("div",{style:{height:"60%"},children:Object(S.jsx)(p.a,{defaultLanguage:"entish",defaultValue:u,onChange:function(e){e&&l(e)},options:{minimap:{enabled:!1},scrollBeyondLastLine:!1,scrollbar:{alwaysConsumeMouseWheel:!1}},onMount:function(e){A.current=e,e.layout()}})}),Object(S.jsxs)("div",{style:{height:"40%",display:"flex",justifyContent:"flex-start"},children:[Object(S.jsxs)("div",{style:{height:"100%",overflow:"scroll"},children:[Object(S.jsx)("p",{style:{color:"#900"},children:b}),Object(S.jsx)("div",{children:y.map((function(e,n){return Object(S.jsx)("p",{children:e},"log-msg-".concat(n))}))})]}),Object(S.jsx)(D,{interpreter:t})]})]})]})},_=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,81)).then((function(n){var r=n.getCLS,t=n.getFID,a=n.getFCP,i=n.getLCP,c=n.getTTFB;r(e),t(e),a(e),i(e),c(e)}))};o.a.render(Object(S.jsx)(i.a.StrictMode,{children:Object(S.jsx)(T,{})}),document.getElementById("root")),_()}},[[80,1,2]]]);
//# sourceMappingURL=main.79a59539.chunk.js.map