(this.webpackJsonpentish=this.webpackJsonpentish||[]).push([[0],{29:function(n,e,t){var r=t(17),a=t(65);"string"===typeof(a=a.__esModule?a.default:a)&&(a=[[n.i,a,""]]);var c={insert:"head",singleton:!1};r(a,c);n.exports=a.locals||{}},30:function(n,e,t){var r=t(17),a=t(66);"string"===typeof(a=a.__esModule?a.default:a)&&(a=[[n.i,a,""]]);var c={insert:"head",singleton:!1};r(a,c);n.exports=a.locals||{}},37:function(n,e,t){var r=t(17),a=t(38);"string"===typeof(a=a.__esModule?a.default:a)&&(a=[[n.i,a,""]]);var c={insert:"head",singleton:!1};r(a,c);n.exports=a.locals||{}},38:function(n,e,t){"use strict";t.r(e);var r=t(8),a=t.n(r),c=t(9),i=t.n(c)()(a.a);i.push([n.i,"body {\n  margin: 0;\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',\n    'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',\n    sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\ncode {\n  font-family: source-code-pro, Menlo, Monaco, Consolas, 'Courier New',\n    monospace;\n}\n","",{version:3,sources:["webpack://./src/index.css"],names:[],mappings:"AAAA;EACE,SAAS;EACT;;cAEY;EACZ,mCAAmC;EACnC,kCAAkC;AACpC;;AAEA;EACE;aACW;AACb",sourcesContent:["body {\n  margin: 0;\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',\n    'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',\n    sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\ncode {\n  font-family: source-code-pro, Menlo, Monaco, Consolas, 'Courier New',\n    monospace;\n}\n"],sourceRoot:""}]),e.default=i},65:function(n,e,t){"use strict";t.r(e);var r=t(8),a=t.n(r),c=t(9),i=t.n(c)()(a.a);i.push([n.i,"._27KvXhK1Cn3xeSy_ERUuYO { /*!*/ }\n.iCwJ4OetHHYzpK6q4N79Q {\n\ndisplay: flex;\nflex-direction: column;\nheight: 100vh;\nwidth: 100vw;\n}\n.iCwJ4OetHHYzpK6q4N79Q select {\npadding: 5px;\nfont-size: 0.875rem;\nborder: 0.0625rem solid #375EAB;\nheight: 30px;\n}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9BcHAtQ29udGFpbmVyLm1vZHVsZS5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsUUFBUSxJQUFJLEVBQUU7QUFDZDtBQUNBLGNBQWM7O0FBRWQsYUFBYTtBQUNiLHNCQUFzQjtBQUN0QixhQUFhO0FBQ2IsWUFBWTtBQVFaO0FBTkE7QUFDQSxZQUFZO0FBQ1osbUJBQW1CO0FBQ25CLCtCQUErQjtBQUMvQixZQUFZO0FBQ1oiLCJmaWxlIjoic3JjL0FwcC1Db250YWluZXIubW9kdWxlLmNzcyIsInNvdXJjZXNDb250ZW50IjpbIi5jbHMxIHsgLyohKi8gfVxuLmNsczIge1xuY29tcG9zZXM6IGNsczE7XG5cbmRpc3BsYXk6IGZsZXg7XG5mbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuaGVpZ2h0OiAxMDB2aDtcbndpZHRoOiAxMDB2dztcblxuc2VsZWN0IHtcbnBhZGRpbmc6IDVweDtcbmZvbnQtc2l6ZTogMC44NzVyZW07XG5ib3JkZXI6IDAuMDYyNXJlbSBzb2xpZCAjMzc1RUFCO1xuaGVpZ2h0OiAzMHB4O1xufVxufSJdfQ== */","",{version:3,sources:["webpack://./src/src/App-Container.module.css","webpack://./src/App-Container.module.css"],names:[],mappings:"AAAA,2BAAQ,IAAI,EAAE;AACd;;AAGA,aAAa;AACb,sBAAsB;AACtB,aAAa;AACb,YAAY;AAQZ;AANA;AACA,YAAY;AACZ,mBAAmB;AACnB,+BAA+B;AAC/B,YAAY;AACZ;ACCA,gtBAAgtB",sourcesContent:[".cls1 { /*!*/ }\n.cls2 {\ncomposes: cls1;\n\ndisplay: flex;\nflex-direction: column;\nheight: 100vh;\nwidth: 100vw;\n\nselect {\npadding: 5px;\nfont-size: 0.875rem;\nborder: 0.0625rem solid #375EAB;\nheight: 30px;\n}\n}",".cls1 { /*!*/ }\n.cls2 {\ncomposes: cls1;\n\ndisplay: flex;\nflex-direction: column;\nheight: 100vh;\nwidth: 100vw;\n}\n.cls2 select {\npadding: 5px;\nfont-size: 0.875rem;\nborder: 0.0625rem solid #375EAB;\nheight: 30px;\n}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9BcHAtQ29udGFpbmVyLm1vZHVsZS5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsUUFBUSxJQUFJLEVBQUU7QUFDZDtBQUNBLGNBQWM7O0FBRWQsYUFBYTtBQUNiLHNCQUFzQjtBQUN0QixhQUFhO0FBQ2IsWUFBWTtBQVFaO0FBTkE7QUFDQSxZQUFZO0FBQ1osbUJBQW1CO0FBQ25CLCtCQUErQjtBQUMvQixZQUFZO0FBQ1oiLCJmaWxlIjoic3JjL0FwcC1Db250YWluZXIubW9kdWxlLmNzcyIsInNvdXJjZXNDb250ZW50IjpbIi5jbHMxIHsgLyohKi8gfVxuLmNsczIge1xuY29tcG9zZXM6IGNsczE7XG5cbmRpc3BsYXk6IGZsZXg7XG5mbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuaGVpZ2h0OiAxMDB2aDtcbndpZHRoOiAxMDB2dztcblxuc2VsZWN0IHtcbnBhZGRpbmc6IDVweDtcbmZvbnQtc2l6ZTogMC44NzVyZW07XG5ib3JkZXI6IDAuMDYyNXJlbSBzb2xpZCAjMzc1RUFCO1xuaGVpZ2h0OiAzMHB4O1xufVxufSJdfQ== */"],sourceRoot:""}]),i.locals={cls1:"_27KvXhK1Cn3xeSy_ERUuYO",cls2:"iCwJ4OetHHYzpK6q4N79Q _27KvXhK1Cn3xeSy_ERUuYO"},e.default=i},66:function(n,e,t){"use strict";t.r(e);var r=t(8),a=t.n(r),c=t(9),i=t.n(c)()(a.a);i.push([n.i,".WlLYDOQAi_2gHMRjpYz2k { /*!*/ }\n._2GZvzmSPqaENq77rUojI56 {\n\ndisplay: flex;\nflex-direction: row;\nalign-items: center;\npadding: 10px 16px 10px 16px;\nbackground-color: #E0EBF5;\n}\n._2GZvzmSPqaENq77rUojI56 h1 {\nmargin-right: 16px;\nfont-size: 20px;\nfont-family: sans-serif;\n}\n._2GZvzmSPqaENq77rUojI56 * {\nmargin-top: 10px;\nmargin-bottom: 10px;\nmargin-right: 12px;\nborder-radius: 5px;\nbox-sizing: border-box;\n}\n._2GZvzmSPqaENq77rUojI56 button {\nborder: 1px solid #375EAB;\nfont-size: 16px;\nfont-family: sans-serif;\nbackground: #375EAB;\ncolor: white;\nheight: 30px;\n}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9BcHAtTmF2YmFyLm1vZHVsZS5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsUUFBUSxJQUFJLEVBQUU7QUFDZDtBQUNBLGNBQWM7O0FBRWQsYUFBYTtBQUNiLG1CQUFtQjtBQUNuQixtQkFBbUI7QUFDbkIsNEJBQTRCO0FBQzVCLHlCQUF5QjtBQXdCekI7QUF0QkE7QUFDQSxrQkFBa0I7QUFDbEIsZUFBZTtBQUNmLHVCQUF1QjtBQUN2QjtBQUVBO0FBQ0EsZ0JBQWdCO0FBQ2hCLG1CQUFtQjtBQUNuQixrQkFBa0I7QUFDbEIsa0JBQWtCO0FBQ2xCLHNCQUFzQjtBQUN0QjtBQUVBO0FBQ0EseUJBQXlCO0FBQ3pCLGVBQWU7QUFDZix1QkFBdUI7QUFDdkIsbUJBQW1CO0FBQ25CLFlBQVk7QUFDWixZQUFZO0FBQ1oiLCJmaWxlIjoic3JjL0FwcC1OYXZiYXIubW9kdWxlLmNzcyIsInNvdXJjZXNDb250ZW50IjpbIi5jbHMxIHsgLyohKi8gfVxuLmNsczIge1xuY29tcG9zZXM6IGNsczE7XG5cbmRpc3BsYXk6IGZsZXg7XG5mbGV4LWRpcmVjdGlvbjogcm93O1xuYWxpZ24taXRlbXM6IGNlbnRlcjtcbnBhZGRpbmc6IDEwcHggMTZweCAxMHB4IDE2cHg7XG5iYWNrZ3JvdW5kLWNvbG9yOiAjRTBFQkY1O1xuXG5oMSB7XG5tYXJnaW4tcmlnaHQ6IDE2cHg7XG5mb250LXNpemU6IDIwcHg7XG5mb250LWZhbWlseTogc2Fucy1zZXJpZjtcbn1cblxuKiB7XG5tYXJnaW4tdG9wOiAxMHB4O1xubWFyZ2luLWJvdHRvbTogMTBweDtcbm1hcmdpbi1yaWdodDogMTJweDtcbmJvcmRlci1yYWRpdXM6IDVweDtcbmJveC1zaXppbmc6IGJvcmRlci1ib3g7XG59XG5cbmJ1dHRvbiB7XG5ib3JkZXI6IDFweCBzb2xpZCAjMzc1RUFCO1xuZm9udC1zaXplOiAxNnB4O1xuZm9udC1mYW1pbHk6IHNhbnMtc2VyaWY7XG5iYWNrZ3JvdW5kOiAjMzc1RUFCO1xuY29sb3I6IHdoaXRlO1xuaGVpZ2h0OiAzMHB4O1xufVxufSJdfQ== */","",{version:3,sources:["webpack://./src/src/App-Navbar.module.css","webpack://./src/App-Navbar.module.css"],names:[],mappings:"AAAA,yBAAQ,IAAI,EAAE;AACd;;AAGA,aAAa;AACb,mBAAmB;AACnB,mBAAmB;AACnB,4BAA4B;AAC5B,yBAAyB;AAwBzB;AAtBA;AACA,kBAAkB;AAClB,eAAe;AACf,uBAAuB;AACvB;AAEA;AACA,gBAAgB;AAChB,mBAAmB;AACnB,kBAAkB;AAClB,kBAAkB;AAClB,sBAAsB;AACtB;AAEA;AACA,yBAAyB;AACzB,eAAe;AACf,uBAAuB;AACvB,mBAAmB;AACnB,YAAY;AACZ,YAAY;AACZ;ACDA,wxCAAwxC",sourcesContent:[".cls1 { /*!*/ }\n.cls2 {\ncomposes: cls1;\n\ndisplay: flex;\nflex-direction: row;\nalign-items: center;\npadding: 10px 16px 10px 16px;\nbackground-color: #E0EBF5;\n\nh1 {\nmargin-right: 16px;\nfont-size: 20px;\nfont-family: sans-serif;\n}\n\n* {\nmargin-top: 10px;\nmargin-bottom: 10px;\nmargin-right: 12px;\nborder-radius: 5px;\nbox-sizing: border-box;\n}\n\nbutton {\nborder: 1px solid #375EAB;\nfont-size: 16px;\nfont-family: sans-serif;\nbackground: #375EAB;\ncolor: white;\nheight: 30px;\n}\n}",".cls1 { /*!*/ }\n.cls2 {\ncomposes: cls1;\n\ndisplay: flex;\nflex-direction: row;\nalign-items: center;\npadding: 10px 16px 10px 16px;\nbackground-color: #E0EBF5;\n}\n.cls2 h1 {\nmargin-right: 16px;\nfont-size: 20px;\nfont-family: sans-serif;\n}\n.cls2 * {\nmargin-top: 10px;\nmargin-bottom: 10px;\nmargin-right: 12px;\nborder-radius: 5px;\nbox-sizing: border-box;\n}\n.cls2 button {\nborder: 1px solid #375EAB;\nfont-size: 16px;\nfont-family: sans-serif;\nbackground: #375EAB;\ncolor: white;\nheight: 30px;\n}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9BcHAtTmF2YmFyLm1vZHVsZS5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsUUFBUSxJQUFJLEVBQUU7QUFDZDtBQUNBLGNBQWM7O0FBRWQsYUFBYTtBQUNiLG1CQUFtQjtBQUNuQixtQkFBbUI7QUFDbkIsNEJBQTRCO0FBQzVCLHlCQUF5QjtBQXdCekI7QUF0QkE7QUFDQSxrQkFBa0I7QUFDbEIsZUFBZTtBQUNmLHVCQUF1QjtBQUN2QjtBQUVBO0FBQ0EsZ0JBQWdCO0FBQ2hCLG1CQUFtQjtBQUNuQixrQkFBa0I7QUFDbEIsa0JBQWtCO0FBQ2xCLHNCQUFzQjtBQUN0QjtBQUVBO0FBQ0EseUJBQXlCO0FBQ3pCLGVBQWU7QUFDZix1QkFBdUI7QUFDdkIsbUJBQW1CO0FBQ25CLFlBQVk7QUFDWixZQUFZO0FBQ1oiLCJmaWxlIjoic3JjL0FwcC1OYXZiYXIubW9kdWxlLmNzcyIsInNvdXJjZXNDb250ZW50IjpbIi5jbHMxIHsgLyohKi8gfVxuLmNsczIge1xuY29tcG9zZXM6IGNsczE7XG5cbmRpc3BsYXk6IGZsZXg7XG5mbGV4LWRpcmVjdGlvbjogcm93O1xuYWxpZ24taXRlbXM6IGNlbnRlcjtcbnBhZGRpbmc6IDEwcHggMTZweCAxMHB4IDE2cHg7XG5iYWNrZ3JvdW5kLWNvbG9yOiAjRTBFQkY1O1xuXG5oMSB7XG5tYXJnaW4tcmlnaHQ6IDE2cHg7XG5mb250LXNpemU6IDIwcHg7XG5mb250LWZhbWlseTogc2Fucy1zZXJpZjtcbn1cblxuKiB7XG5tYXJnaW4tdG9wOiAxMHB4O1xubWFyZ2luLWJvdHRvbTogMTBweDtcbm1hcmdpbi1yaWdodDogMTJweDtcbmJvcmRlci1yYWRpdXM6IDVweDtcbmJveC1zaXppbmc6IGJvcmRlci1ib3g7XG59XG5cbmJ1dHRvbiB7XG5ib3JkZXI6IDFweCBzb2xpZCAjMzc1RUFCO1xuZm9udC1zaXplOiAxNnB4O1xuZm9udC1mYW1pbHk6IHNhbnMtc2VyaWY7XG5iYWNrZ3JvdW5kOiAjMzc1RUFCO1xuY29sb3I6IHdoaXRlO1xuaGVpZ2h0OiAzMHB4O1xufVxufSJdfQ== */"],sourceRoot:""}]),i.locals={cls1:"WlLYDOQAi_2gHMRjpYz2k",cls2:"_2GZvzmSPqaENq77rUojI56 WlLYDOQAi_2gHMRjpYz2k"},e.default=i},68:function(n,e,t){"use strict";t.r(e);var r,a=t(1),c=t.n(a),i=t(24),o=t.n(i),s=(t(37),t(3)),u=t(19),l=t.n(u),p=t(14),f=t(20),m=t(25),d=t(21),b=t(26),h=t(31),g=t(32),A=t(27),B=t.n(A),v=t(28),y=t.n(v),x='{\n  function joinClauses(type, first, rest) {\n    if (first.type === \'fact\' && rest.length === 1 && (rest[0].type === \'conjunction\' || rest[0].type === \'disjunction\')) {\n      rest[0].clauses.unshift(first);\n      return rest[0];\n    }\n    return {\n      type: type,\n      clauses: [first].concat(rest),\n    };\n  }\n  function parseNumber(n) {\n    return parseFloat(n.flat().filter(d => d).join(\'\'));\n  }\n}\n\nstatements\n  = statement+\n\nstatement\n  = comment:comment "\\n"? { return comment }\n  / inference:inference "." { return inference }\n  / claim:claim "." { return claim }\n  / fact:fact "." { return fact }\n  / "?" query:clause "." { return { type: \'query\', clause: query } }\n  / [ \\t\\r\\n]+ { return null }\n\nfact\n  = whitespace name:variable "(" args:arguments ")" whitespace { return { type: \'fact\', table: name.value, fields: args.arguments } }\n  / whitespace "~" fact:fact { return { ...fact, negative: true } }\n\nexpr\n  = addition\n  / multiplication \n  / probability\n  / function\n  / "(" comparison ")"\n  / variable\n  / roll\n  / string \n  / number\n\nterm\n  = multiplication\n  / factor\n\nfactor\n  = parenthetical_expr\n  / function\n  / variable\n  / number \n\naddition\n  = left:term whitespace operator:([+\\-]) whitespace right:expr { return { type: \'binary_operation\', operator, left, right } }\n\nmultiplication\n  = left:factor whitespace operator:([*/]) whitespace right:expr { return { type: \'binary_operation\', operator, left, right } }\n\nparenthetical_expr\n  = "(" " "* expr:expr " "* ")" { return expr }\n\nfunction\n  = name:variable "(" args:arguments ")" { return { type: \'function\', function: name.value, arguments: args.arguments } }\n\narguments\n  = whitespace first:expr rest:nextargs* whitespace { return { type: \'arguments\', arguments: [first].concat(rest) } }\n\nnextargs\n  = "," whitespace expr:expr { return expr }\n\nprobability\n  = "Pr(" arg:variable ")" { return { type: \'function\', function: \'probability\', arguments: [arg] } }\n  / "Pr(" arg:roll ")" { return { type: \'function\', function: \'probability\', arguments: [arg] } }\n\ninference\n  = left:fact ":-" whitespace right:clause { return { type: \'inference\', left, right } }\n\nclause\n  = conjunction\n  / disjunction\n  / "(" whitespace clause:clause whitespace ")" { return clause }\n  / fact\n  / comparison\n\nconjunction\n  = "(" first:clause ")" whitespace rest:next_conjunction+ { return joinClauses(\'conjunction\', first, rest) }\n  / first:fact rest:next_conjunction+ { return joinClauses(\'conjunction\', first, rest) }\n\ndisjunction\n  = "(" first:fact ")" whitespace rest:next_disjunction+ { return joinClauses(\'disjunction\', first, rest) }\n  / first:fact rest:next_disjunction+ { return joinClauses(\'disjunction\', first, rest) }\n\nnext_conjunction\n  = "&" whitespace clause:clause { return clause }\n\nnext_disjunction\n  = "|" whitespace clause:clause { return clause }\n\nclaim\n  = "\u2234" clause:clause { return { type: \'claim\', clause: clause } }\n\ncomparison\n  = whitespace left:expr whitespace operator:comparison_operator whitespace right:expr whitespace { return { type: \'comparison\', operator, left, right }}\n\ncomparison_operator\n  = op:"=" { return op }\n  / op:"!=" { return op }\n  / op:">=" { return op }\n  / op:"<=" { return op }\n  / op:">" { return op }\n  / op:"<" { return op }\n\ncomment\n  = "//" comment:[^\\n]* { return { type: \'comment\', value: comment.join(\'\').trim() } }\n  / "/*" comment:(!"*/" .)* "*/" { return { type: \'comment\', value: comment.flat().join(\'\').trim() }}\n\nstring\n  = name:([A-Z][A-Za-z_]+) { return { type: \'string\', value: name[0] + name[1].join(\'\') } }\n\nvariable\n  = name:([a-z_]+) { return { type: \'variable\', value: name.join(\'\') } }\n  / "?" { return { type: \'variable\', value: \'?\' } }\n\nroll\n  = count:([0-9]+) "d" die:([0-9]+) modifier:([+-][0-9]+)? { return { type: \'roll\', count: parseInt(count), die: parseInt(die), modifier: parseInt(modifier || \'0\') } }\n\nnumber\n  = number:([-]?[0-9]+([.][0-9]+)?) { return { type: \'number\', value: parseNumber(number) } }\n\nwhitespace\n  = [ \\t\\r\\n]*\n';r=x;var j=function(n){Object(b.a)(t,n);var e=Object(h.a)(t);function t(){return Object(d.a)(this,t),e.apply(this,arguments)}return t}(Object(g.a)(Error));function Q(n,e){var t={};return n.forEach((function(n){var r=e(n);t[r]=t[r]||[],t[r].push(n)})),Object.keys(t).map((function(n){return t[n]}))}function C(n,e){if(n.type!==e.type)return!1;if("roll"===n.type&&"roll"===e.type)return k(n)===k(e);if("value"in n&&"value"in e)return n.value===e.value;throw new j("incomparable types: ".concat(n.type," and ").concat(e.type))}var w=function(){function n(){Object(d.a)(this,n),this.parser=void 0,this.tables={},this.inferences=[],this.parser=B.a.generate(r,{trace:!0})}return Object(m.a)(n,[{key:"exec",value:function(n){switch(n.type){case"comment":return;case"fact":return this.loadFact(n),void console.log("added ".concat(U(n)));case"inference":return console.log("inferring ".concat(F(n))),void this.loadInference(n);case"claim":if(console.log("testing ".concat(X(n))),!this.testClaim(n))throw new j("false claim: ".concat(X(n)));return void console.log("verified ".concat(X(n)));case"query":return console.log("query: ".concat(O(n))),void this.query(n).forEach((function(n){return console.log("found: ".concat(U(n)))}))}}},{key:"load",value:function(n){var e=new y.a(n,{useColor:!1});try{var t=this.parser.parse(n,{tracer:e}).filter((function(n){return n}));for(var r in t){var a=t[r];this.exec(a)}}catch(c){throw"location"in c?(console.error(e.getBacktraceString()),new Error("Line ".concat(c.location.start.line," Column ").concat(c.location.start.column,": ").concat(c.message))):(console.error(c),c)}}},{key:"loadFact",value:function(n){var e=this;if(n.negative)this.tables[n.table]=this.tables[n.table].filter((function(e){return!e.every((function(e,t){return C(n.fields[t],e)}))}));else{if(this.tables[n.table]||(this.tables[n.table]=[]),n.fields.some((function(n){return"string"!==n.type&&"number"!==n.type&&"roll"!==n.type})))throw new j("facts must be grounded with strings or numbers: ".concat(U(n)));this.tables[n.table].some((function(e){return e.every((function(e,t){return C(e,n.fields[t])}))}))||(this.tables[n.table].push(n.fields),this.inferences.forEach((function(n){return e.loadInference(n,!0)})))}}},{key:"query",value:function(n){return this.searchInferenceTree(n.clause).map((function(n){return n.facts})).flat()}},{key:"loadInference",value:function(n){var e=this,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=this.searchInferenceTree(n.right),a=r.map((function(t){return e.ground(n.left,t)}));a.some((function(n){return n.fields.some((function(n){return"aggregation"===n.type}))}))&&(a=Q(a,(function(n){return n.fields.filter((function(n){return"string"===n.type||"number"===n.type})).map((function(n){return n.value})).join("-")})).map((function(n){var t=n[0];return{type:"fact",table:t.table,fields:t.fields.map((function(t,r){return e.aggregate(t,r,n)}))}}))),a.forEach((function(n){return e.loadFact(n)})),t||this.inferences.some((function(e){return F(e)===F(n)}))||this.inferences.push(n)}},{key:"aggregate",value:function(n,e,t){switch(n.type){case"string":case"number":return n;case"aggregation":return{type:"number",value:t.map((function(n){var t=n.fields[e];if("aggregation"!==t.type)throw new j("TODO");return t.arguments})).flat().reduce((function(n,e){return n+e}),0)};default:throw new j("TODO")}}},{key:"ground",value:function(n,e){var t=this;return{type:"fact",table:n.table,fields:n.fields.map((function(n){var r=t.evaluateExpression(n,e);switch(typeof r){case"number":return{type:"number",value:r};case"string":return{type:"string",value:r};case"object":return r;default:throw new j("unknown expression result type ".concat(typeof r))}})),negative:n.negative}}},{key:"searchInferenceTree",value:function(n){var e=this;switch(n.type){case"fact":return(this.tables[n.table]||[]).map((function(t){return e.bind(t,n)})).filter((function(n){return void 0!==n}));case"conjunction":var t=[];return this.join(n.clauses.map((function(n){return e.searchInferenceTree(n)})),[],t),t.map((function(n){return e.reduceBindings(n)})).filter((function(n){return void 0!==n}));case"disjunction":return n.clauses.map((function(n){return e.searchInferenceTree(n)})).flat();case"comparison":return[{facts:[],values:{},comparisons:[n]}]}}},{key:"join",value:function(n,e,t){if(0!==n.length){var r,a=n[0],c=n.slice(1),i=Object(f.a)(a);try{for(i.s();!(r=i.n()).done;){var o=r.value;this.join(c,e.concat([o]),t)}}catch(s){i.e(s)}finally{i.f()}}else t.push(e)}},{key:"reduceBindings",value:function(n){var e=this;try{return n.reduce((function(n,t){Object.keys(n.values).forEach((function(e){if(t.values[e]&&t.values[e]!==n.values[e])throw new j("bindings disagree: ".concat(t.values[e]," != ").concat(n.values[e]))}));var r={facts:n.facts.concat(t.facts),values:Object.assign(n.values,t.values),comparisons:[]};return t.comparisons.forEach((function(n){if(!e.compare(n,r))throw new j("false comparison: ".concat(I(n),", ").concat(r.values))})),r}),{facts:[],values:{},comparisons:[]})}catch(t){if(!(t instanceof j))throw t;return}}},{key:"bind",value:function(n,e){var t=n.map((function(n,t){var r=e.fields[t],a="roll"===n.type?k(n):n.value;switch(r.type){case"string":case"number":case"roll":return!!C(n,r)&&["".concat(e.table,"[").concat(t,"]"),a];case"variable":return"?"===r.value?["".concat(e.table,"[").concat(t,"]"),a]:[r.value,a];default:throw new j("can't handle ".concat(r.type," ").concat(Z(r)," in clause"))}}));if(!t.some((function(n){return!n})))return{facts:[{type:"fact",table:e.table,fields:n}],values:Object.fromEntries(t),comparisons:[]}}},{key:"compare",value:function(n,e){var t=this.evaluateExpression(n.left,e),r=this.evaluateExpression(n.right,e);if(t instanceof Object||r instanceof Object)throw new Error("can't compare aggregations");switch(n.operator){case"=":return t===r;case"!=":return t!==r;case">":return t>r;case">=":return t>=r;case"<":return t<r;case"<=":return t<=r}}},{key:"testClaim",value:function(n){if("fact"===n.clause.type){var e=this.tables[n.clause.table];if(e){var t,r=Object(f.a)(e);try{var a=function(){var e=t.value;return e.length!==n.clause.fields.length?"continue":n.clause.fields.every((function(n,t){return n.type===e[t].type&&JSON.stringify(n)===JSON.stringify(e[t])}))?{v:!n.clause.negative}:void 0};for(r.s();!(t=r.n()).done;){var c=a();if("continue"!==c&&"object"===typeof c)return c.v}}catch(i){r.e(i)}finally{r.f()}}return!!n.clause.negative}throw new j("Can't verify claims of type ".concat(n.clause.type))}},{key:"evaluateFunction",value:function(n,e){var t=this;switch(n.function){case"floor":var r=this.evaluateExpression(n.arguments[0],e);if("number"!==typeof r)throw new j("floor requires numeric argument, got ".concat(r));return Math.floor(r);case"sum":return{type:"aggregation",function:"sum",arguments:n.arguments.map((function(n){return t.evaluateExpression(n,e)}))};default:throw new j("can't handle function ".concat(n.function))}}},{key:"evaluateBinaryOperation",value:function(n,e){var t=this.evaluateExpression(n.left,e);if("number"!==typeof t)throw new j("binary operation requires number on left-hand side, got ".concat(t));var r=this.evaluateExpression(n.right,e);if("number"!==typeof r)throw new j("binary operation requires number on right-hand side, got ".concat(r));switch(n.operator){case"+":return t+r;case"-":return t-r;case"/":return t/r;case"*":return t*r;case"^":return Math.pow(t,r)}}},{key:"evaluateExpression",value:function(n,e){switch(n.type){case"binary_operation":return this.evaluateBinaryOperation(n,e);case"function":return this.evaluateFunction(n,e);case"variable":return e.values[n.value];case"string":case"number":return n.value;case"roll":return k(n);case"aggregation":return n}}}]),n}();function F(n){return"".concat(U(n.left)," :- ").concat(I(n.right),".")}function O(n){return"".concat(I(n.clause),"?")}function U(n){return"".concat(n.negative?"~":"").concat(n.table,"(").concat(n.fields.map((function(n){return Z(n)})).join(", "),")")}function I(n){switch(n.type){case"fact":return U(n);case"conjunction":return"("+n.clauses.map((function(n){return I(n)})).join(" & ")+")";case"disjunction":return"("+n.clauses.map((function(n){return I(n)})).join(" | ")+")";case"comparison":return"".concat(Z(n.left)," ").concat(n.operator," ").concat(Z(n.right))}}function Z(n){switch(n.type){case"string":return n.value;case"number":return n.value.toString();case"roll":return k(n);case"variable":return n.value;case"binary_operation":return"".concat(Z(n.left)," ").concat(n.operator," ").concat(Z(n.right));case"function":return"".concat(n.function,"(").concat(n.arguments.map((function(n){return Z(n)})).join(", "),")");case"aggregation":return"".concat(n.function,"(").concat(n.arguments.map((function(n){return"object"===typeof n?Z(n):n})).join(", "),")")}}function k(n){var e=n.modifier>0?"+".concat(n.modifier):n.modifier<0?"-".concat(n.modifier):"";return"".concat(n.count,"d").concat(n.die).concat(e)}function X(n){return"\u2234 ".concat(I(n.clause))}var W=t(29),N=t.n(W),z=t(30),E=t.n(z),G=t(2),J=l()("div",null,{displayName:"Container",styles:N.a}),L=l()("div",null,{displayName:"Navbar",styles:E.a});function Y(n){var e=n.interpreter,t=Object(a.useState)(void 0),r=Object(s.a)(t,2),c=r[0],i=r[1];return Object(G.jsxs)("div",{style:{margin:"16px 24px"},children:[Object.keys(e.tables).length>0&&Object(G.jsx)("select",{onChange:function(n){i(n.target.value)},children:Object.keys(e.tables).map((function(n){return Object(G.jsx)("option",{value:n,children:n},n)}))}),c&&Object(G.jsx)(M,{name:c,rows:e.tables[c]})]})}function M(n){var e=n.name,t=n.rows;return Object(G.jsx)("table",{children:Object(G.jsx)("tbody",{children:t.map((function(n,t){return Object(G.jsx)("tr",{children:n.map((function(n,r){return Object(G.jsx)("td",{children:Z(n)},"".concat(e,"-").concat(t,"-").concat(r))}))},"".concat(e,"-").concat(t))}))})})}var D=function(){!function(){var n=Object(p.b)();n&&(n.languages.register({id:"entish"}),n.languages.setMonarchTokensProvider("entish",{defaultToken:"invalid",keywords:[],brackets:[{open:"(",close:")",token:"delimiter.parenthesis"}],tokenizer:{root:[[/\u2234|:-|\.|^\?/,"keyword"],[/\/\/.*$/,"comment"],[/[A-Z][a-z]*/,"constant"],[/[0-9]+d[0-9]+([+-][0-9]+)?/,"constant"],[/\d+/,"number"],[/[()]/,"@brackets"],[/([a-z_]+)\(/,"identifier"],[/[a-z_]+|\?/,"variable.name"],[/[,]/,"delimiter"],[/~|=|>|<|!=|>=|<=|\*|\/|\+|-|\^|&|\|/,"operators"],[/[ \t\r\n]+/,""]]}}))}();var n={dungeon_world:'// Auric has the Barbarian class\nclass(Auric, Barbarian).\n\n// Auric has a Strength of 16\nattribute(Auric, Strength, 16).\n\n// Auric has a Wisdom of 16\nattribute(Auric, Wisdom, 9).\n\n// A character\'s bonus is half their attribute score minus ten\nbonus(character, attr, floor((score-10)/2)) :- attribute(character, attr, score).\n\n// Therefore, Auric has a Strength bonus of 3\n\u2234 bonus(Auric, Strength, 3).\n\n// Therefore, Auric has a Wisdom bonus of -1\n\u2234 bonus(Auric, Wisdom, -1).\n\n// Full Plate has an armor bonus of 3\narmor(FullPlate, 3).\n\n// Full Plate has a weight of 4\nweight(FullPlate, 4).\n\n// Full Plate has the clumsy tag\ntag(FullPlate, Clumsy).\n\n// A small shield\nweight(RoundShield, 1).\narmor(RoundShield, 1).\n\n// And a sword\nweight(TwoHandedSword, 2).\ndamage(TwoHandedSword, 1d8).\ntag(TwoHandedSword, Close).\n\n// Given gear has a tag and the character is wearing the gear, add the tag to the character\ntag(character, tag) :- (wearing(character, gear) | wielding(character, gear)) & tag(gear, tag).\n\n// Given a character, their armor is the sum of the armor of gear they are wearing/wielding\narmor(character, sum(armor)) :- (wearing(character, gear) | wielding(character, gear)) & armor(gear, armor).\n\n// Given a character, their load is the sum of the weights of gear they are wearing and wielding\nload(character, sum(weight)) :- (wearing(character, gear) | wielding(character, gear)) & weight(gear, weight).\n\n// The max load of a Barbarian is 8 plus their strength bonus\nmax_load(character, 8+str) :- class(character, Barbarian) & bonus(character, Strength, str).\n\n// Give Auric his gear\nwearing(Auric, FullPlate).\nwielding(Auric, RoundShield).\nwielding(Auric, TwoHandedSword).\n\n// So Auric is Clumsy, but he\'s got 4 armor a load of 7, and a max load of 11\n\u2234 tag(Auric, Clumsy).\n\u2234 armor(Auric, 4).\n\u2234 load(Auric, 7).\n\u2234 max_load(Auric, 11).\n\n? wielding(Auric, ?) | wearing(Auric, ?).\n\n// The move "Full Plate and Packing Steel" negates the Clumsy tag\n~tag(character, Clumsy) :- move(character, FullPlateAndPackingSteel).\n\n// Auric has the move "Full Plate and Packing Steel"\nmove(Auric, FullPlateAndPackingSteel).\n\n// Auric is not Clumsy\n\u2234 ~tag(Auric, Clumsy).\n\nattack(Barbarian, 1d20+2).\n\n// TODO: Working on rolls and probability math\n// \u2234 attack(Barbarian, roll) & Pr(roll) >= 15 = 0.400.\n',clear:""},e=Object(a.useState)(new w),t=Object(s.a)(e,2),r=t[0],c=t[1],i=Object(a.useState)(n.dungeon_world),o=Object(s.a)(i,2),u=o[0],l=o[1],f=Object(a.useState)(void 0),m=Object(s.a)(f,2),d=m[0],b=m[1],h=Object(a.useState)([]),g=Object(s.a)(h,2),A=g[0],B=g[1],v=Object(a.useRef)(null);return Object(G.jsxs)(J,{children:[Object(G.jsxs)(L,{children:[Object(G.jsx)("h1",{children:"Entish Playground"}),Object(G.jsx)("button",{onClick:function(){var n=console.log,e=[];console.log=function(n){e.push(n)};try{r.load(u),b(void 0)}catch(t){b(t.message)}console.log=n,B(e),c(r)},children:"Run"}),Object(G.jsxs)("select",{onChange:function(e){var t,r=n[e.target.value];l(r),null===(t=v.current)||void 0===t||t.getModel().setValue(r),c(new w)},defaultValue:"dungeon_world",children:[Object(G.jsx)("option",{value:"clear",children:"Clear"}),Object(G.jsx)("option",{value:"dungeon_world",children:"Dungeon World"})]}),Object(G.jsx)("a",{href:"//github.com/etherealmachine/entish#readme",children:"README"}),Object(G.jsx)("div",{style:{marginLeft:"auto"},children:Object(G.jsxs)("span",{children:[Object(G.jsx)("a",{href:"//github.com/etherealmachine",children:"James Pettit"})," \xa92021"]})})]}),Object(G.jsxs)("div",{style:{height:"calc(100vh - 70px)"},children:[Object(G.jsx)("div",{style:{height:"60%"},children:Object(G.jsx)(p.a,{defaultLanguage:"entish",defaultValue:u,onChange:function(n){n&&l(n)},options:{minimap:{enabled:!1},scrollBeyondLastLine:!1,scrollbar:{alwaysConsumeMouseWheel:!1}},onMount:function(n){v.current=n,n.layout()}})}),Object(G.jsxs)("div",{style:{height:"40%",display:"flex",justifyContent:"flex-start"},children:[Object(G.jsxs)("div",{style:{height:"100%",overflow:"scroll"},children:[Object(G.jsx)("p",{style:{color:"#900"},children:d}),Object(G.jsx)("div",{children:A.map((function(n,e){return Object(G.jsx)("p",{children:n},"log-msg-".concat(e))}))})]}),Object(G.jsx)(Y,{interpreter:r})]})]})]})},H=function(n){n&&n instanceof Function&&t.e(3).then(t.bind(null,69)).then((function(e){var t=e.getCLS,r=e.getFID,a=e.getFCP,c=e.getLCP,i=e.getTTFB;t(n),r(n),a(n),c(n),i(n)}))};o.a.render(Object(G.jsx)(c.a.StrictMode,{children:Object(G.jsx)(D,{})}),document.getElementById("root")),H()}},[[68,1,2]]]);
//# sourceMappingURL=main.a48729e3.chunk.js.map